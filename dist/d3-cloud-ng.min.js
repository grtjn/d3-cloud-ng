!function(){"use strict";angular.module("d3.cloud",["d3.cloud.tpls"])}(),function(){"use strict";function e(e){function t(t){for(var o=[],r=0;r<t.length;r++)e.filter({word:t[r]})&&o.push(t[r]);return o}e.$watch("words",function(o,r){var n=null,l=0;if(o)if(n=t(o),e.filteredWords=n,e.cloud){if(r)if(r.length!==n.length)l=1;else for(var d=0;d<n.length;d++)l||n[d].name===r[d].name||n[d].score===r[d].score||(l=1);else l=1;l&&e.updateCloud(n)}else e.updateCloud(n);else e.cloud&&(n=[],e.updateCloud(n),e.filteredWords=n)},!0)}angular.module("d3.cloud").controller("d3CloudController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){return{restrict:"E",replace:"true",scope:{events:"=?",font:"@",ignoreList:"=?",filter:"&?",padding:"@",rotate:"&?",slopeBase:"@",slopeFactor:"@",words:"="},templateUrl:function(){return"/d3-cloud-ng/d3-cloud.html"},controller:"d3CloudController",controllerAs:"ctrl",link:function(o,r,n){function l(e){var t=o.cloud.size(),n=d3.schemeCategory20?d3.schemeCategory20:d3.scale.category20(),l=d3.select(r[0]).select("svg");l.empty()&&(l=d3.select(r[0]).append("svg")),l.attr("width",t[0]).attr("height",t[1]);var d=l.selectAll("g");d.empty()&&(d=l.append("g"));var u=d.attr("transform","translate("+t[0]/2+","+t[1]/2+")").selectAll("text").data(e);u.enter().append("text"),u.style("font-size",function(e){return e.size+"px"}).style("font-family",o.font).style("fill",function(t,o){return e[o].color?e[o].color:n(o)}).attr("text-anchor","middle").attr("transform",function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}).on(o.events).text(function(e){return e.text}),u.exit().remove()}o.events=o.events||{},o.font=o.font||"Impact",o.ignoreList=o.ignoreList||[],o.ignoreList.length>0&&e.warn("You are using deprecated ignoreList. Please use custom filter function instead."),o.filter=o.filter||function(e){return-1===o.ignoreList.indexOf(e.word.name)},o.filteredWords=[];var d=n.padding?Number(o.padding):5,u=o.rotate&&function(e,t){return o.rotate({word:o.filteredWords[t]})}||function(){return 90*~~(2*Math.random())-45},i=n.slopeBase?Number(o.slopeBase):2,c=n.slopeFactor?Number(o.slopeFactor):30;o.updateCloud=function(e){var t=r[0].clientHeight+0,n=r[0].clientWidth+0,s=0,a=1,f=1;e.map(function(e){s>e.score&&(s=e.score),a<e.score&&(a=e.score)}),a!==s&&(f=c/(a-s)),o.cloud=d3.layout.cloud().size([n,t]),o.cloud.words(e.map(function(e){var t={text:e.name,size:e.score*f+i};return e.color&&(t.color=e.color),t})).padding(d).rotate(u).font(o.font).fontSize(function(e){return e.size}).on("end",l).start()},!o.cloud&&o.filteredWords&&o.filteredWords.length&&o.updateCloud(o.filteredWords);var s=function(){o.updateCloud(o.filteredWords)};angular.element(t).on("resize",s),o.$on("$destroy",function(){angular.element(t).off("scroll",s)})}}}angular.module("d3.cloud").directive("d3Cloud",e),e.$inject=["$log","$window"]}(),function(e){try{e=angular.module("d3.cloud.tpls")}catch(t){e=angular.module("d3.cloud.tpls",[])}e.run(["$templateCache",function(e){e.put("/d3-cloud-ng/d3-cloud.html",'<div class="d3-cloud">\n  <div class="cloud"> \n\n  <div ng-if="filteredWords.length === 0">\n    No results to display.\n  </div>\n</div>\n')}])}();